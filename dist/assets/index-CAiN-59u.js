import{u as ne,r,a as ie,b as ce,c as le,j as e,S as oe,B as de,d as a,T as n,I as m,E as f,e as C,C as b,F as L,f as I,g as E,h as he,D as ue,i as xe,k as ge,M as S,l as pe,m as je,n as me,P as fe,s as w,o as Ce,p as be}from"./index-FZyNXrpX.js";const ke=()=>{const{category:g}=ne(),[y,R]=r.useState([]),[d,k]=r.useState([]),[A]=r.useState(["All","Sound","Genset","Video","Lighting","Fabrication","Shamiana"]),[o,T]=r.useState(g||"All"),[H,M]=r.useState("default"),[h,Se]=r.useState(""),[u,z]=r.useState(""),[x,B]=r.useState(""),O=ie(),p=ce(),[c,W]=r.useState({categories:!0,priceRange:!1,discount:!1}),[v,Q]=r.useState([0,100]),[$,we]=r.useState(!1),[F,G]=r.useState(!1),[P,V]=r.useState(!1),{numberOfDays:N}=le(s=>s.date),[D,q]=r.useState(1),_=6,J=[{label:"Home",link:"/"},{label:g}],K=async()=>{try{p(w(!0));const s=await Ce.rentalProduct();s.data.data&&s.data.data.length>0?(R(s.data.data),console.log(g),T(g),p(w(!1))):(R([]),p(w(!1)))}catch(s){p(w(!1)),be(s)}},U=()=>{let s=y;o!=="All"&&(s=s.filter(t=>t.product_category.toLowerCase()===o.toLowerCase())),N&&(s=s.filter(t=>t.stock_in_hand>=N)),h&&(s=s.filter(t=>{var i;return(i=t.product_name)==null?void 0:i.toLowerCase().includes(h==null?void 0:h.toLowerCase())})),F&&(s=s.filter(t=>t.stock_in_hand<50)),P&&(s=s.filter(t=>t.stock_in_hand>=50)),s=s.filter(t=>t.discount>=v[0]&&t.discount<=v[1]),k(s)};r.useEffect(()=>{U()},[y,o,u,x,N,h,F,P,v]),r.useEffect(()=>{K()},[]);const X=()=>{let s=y;o!=="All"&&(s=s.filter(t=>t.product_category.toLowerCase()===o.toLowerCase())),(u||x)&&(s=s.filter(t=>(!u||t.product_price>=parseFloat(u))&&(!x||t.product_price<=parseFloat(x)))),k(s)},Y=s=>{M(s);let t=[...d];s==="newest"?t.sort((i,l)=>l.id-i.id):s==="priceLowToHigh"?t.sort((i,l)=>parseFloat(i.product_price)-parseFloat(l.product_price)):s==="priceHighToLow"&&t.sort((i,l)=>parseFloat(l.product_price)-parseFloat(i.product_price)),k(t)},j=s=>{W(t=>({...t,[s]:!t[s]}))},Z=()=>{const s=(D-1)*_;return d.slice(s,s+_)},ee=s=>{console.log("The review",s);const t=s.reduce((i,l)=>i+l.ratings,0);return s.length?(t/s.length).toFixed(1):0},se=s=>{O(`/products/${s}`)},te=s=>{q(s)},ae=s=>{G(s.target.checked)},re=s=>{V(s.target.checked)};return e.jsxs(e.Fragment,{children:[e.jsx(oe,{}),e.jsx(de,{paths:J}),e.jsx(a,{className:"category-page",children:e.jsxs(a,{className:"products-page",children:[e.jsxs(a,{className:"filters-sidebar",children:[e.jsxs(a,{className:"filter-group",children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>j("categories"),children:[e.jsx(n,{variant:"subtitle1",children:"Categories"}),e.jsx(m,{size:"small",children:c.categories?e.jsx(f,{}):e.jsx(C,{})})]}),e.jsx(b,{in:c.categories,children:e.jsx(a,{sx:{marginTop:"0.5rem"},children:A.map(s=>e.jsx(L,{control:e.jsx(I,{checked:s===o,onChange:()=>T(s)}),label:s,sx:{display:"block",color:"#555"}},s))})})]}),e.jsxs(a,{className:"filter-group",children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>j("priceRange"),children:[e.jsx(n,{variant:"subtitle1",children:"Price Range"}),e.jsx(m,{size:"small",children:c.priceRange?e.jsx(f,{}):e.jsx(C,{})})]}),e.jsx(b,{in:c.priceRange,children:e.jsxs(a,{children:[e.jsx(n,{variant:"subtitle1",children:"Price"}),e.jsx(E,{type:"number",placeholder:"Min",size:"small",value:u,onChange:s=>z(s.target.value),className:"price-input"}),e.jsx(E,{type:"number",placeholder:"Max",size:"small",value:x,onChange:s=>B(s.target.value),className:"price-input"}),e.jsx(he,{variant:"contained",color:"primary",onClick:X,sx:{marginTop:"1rem",background:"linear-gradient(90deg, rgb(196, 70, 255) -14.33%, rgb(120, 1, 251) 38.59%, rgb(62, 0, 130) 98.88%)"},children:"Apply"})]})})]}),e.jsxs(a,{className:"filter-group",children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>j("discount"),children:[e.jsx(n,{variant:"subtitle1",children:"Discount"}),e.jsx(m,{size:"small",children:c.discount?e.jsx(f,{}):e.jsx(C,{})})]}),e.jsx(b,{in:c.discount,children:e.jsx(a,{sx:{marginTop:"0.5rem"},children:e.jsx(a,{className:"p-6 bg-white shadow-lg rounded-lg max-w-md mx-auto",children:e.jsx(ue,{onChange:Q})})})})]}),e.jsxs(a,{className:"filter-group",children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>j("availability"),children:[e.jsx(n,{variant:"subtitle1",children:"Availability"}),e.jsx(m,{size:"small",children:c.availability?e.jsx(f,{}):e.jsx(C,{})})]}),e.jsx(b,{in:c.availability,children:e.jsx(a,{sx:{marginTop:"0.5rem",width:"15rem"},children:e.jsxs(a,{className:`filters-sidebar ${$?"open":""}`,children:[e.jsx(L,{sx:{width:"15rem"},control:e.jsx(I,{checked:F,onChange:ae}),label:"Quantity less than 50"}),e.jsx(L,{sx:{width:"15rem"},control:e.jsx(I,{checked:P,onChange:re}),label:"Quantity more than 50"})]})})})]})]}),d.length<0?e.jsxs(a,{className:"main-content",children:[e.jsxs(a,{className:"sorting-header",children:[e.jsxs(n,{variant:"p",className:"number-results",children:["Showing ",d.length," results"]}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx(n,{variant:"h4",sx:{fontWeight:"bold",color:"#1E2A38",fontSize:"1rem"},children:"Sort By:"}),e.jsx(xe,{sx:{minWidth:220,backgroundColor:"#F5F5F5",borderRadius:"10px",padding:"0.5rem"},children:e.jsxs(ge,{value:H,onChange:s=>Y(s.target.value),displayEmpty:!0,sx:{borderRadius:"10px",backgroundColor:"#F5F5F5",color:"#000",fontWeight:"bold",height:"45px",boxShadow:"none",outline:"none",border:"1px solid #ddd","&:hover":{backgroundColor:"#e0e0e0"}},children:[e.jsx(S,{value:"default",children:"Default"}),e.jsx(S,{value:"priceLowToHigh",children:"Price: Low to High"}),e.jsx(S,{value:"priceHighToLow",children:"Price: High to Low"}),e.jsx(S,{value:"newest",children:"Newest"})]})})]})]}),e.jsx(a,{className:"products-grid",children:Z().map(s=>e.jsxs(pe,{className:"product-card",onClick:()=>se(s._id),children:[e.jsx("img",{src:s.product_image[0],alt:s.product_name,className:"product-image"}),e.jsxs(je,{children:[e.jsx(n,{variant:"h6",className:"product-title",children:s.product_name}),e.jsxs(a,{sx:{display:"flex",gap:"0.5rem",marginLeft:"-6px"},children:[e.jsx(me,{rating:parseFloat(ee(s.Reviews))}),e.jsxs(n,{children:[s.Reviews.length>0?s.Reviews.length:0," ","Reviews"]})]}),e.jsxs(n,{className:"product-price",children:["â‚¹",s.product_price]}),e.jsxs(n,{className:"product-discount",children:[s.discount,"% OFF"]})]})]},s.id))}),e.jsx(fe,{currentPage:D,totalPages:Math.ceil(d.length/_),onPageChange:te})]}):e.jsx(a,{sx:{display:"flex",margin:"auto auto",fontSize:"1.5rem"},children:e.jsx(n,{variant:"p",children:"No Product found"})})]})})]})};export{ke as default};
